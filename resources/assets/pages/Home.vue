<template>
    <div id="homepage">
        <div class="overflow-h d-flex align-items-center">
            <div class="container">
                <div class="row d-flex align-items-center justify-content-between">
                    <div class="content">
                        <h2 class="main-title">Digital experiences that <span class="text-subcolor">make you shine</span>.</h2>
                        <span>Daydream Lab is a digital design agency,a place where strategy, creativity and technology converge.We love finding simple solutions to complex challenges and aim to deliverbeautifully crafted work.</span>
                    </div>
                    <div class="btn-goto d-flex align-items-center">
                        <svg class="svg-bottle" width="70" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 71.57 144.68">
                            <defs>
                                <linearGradient id="a" x1="-908.64" y1="602.18" x2="-908.64" y2="601.18" gradientTransform="matrix(66.57, 0, 0, -43.18, 60525.42, 26100.62)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#131313" />
                                    <stop offset="1" stop-color="#fbfbfb" />
                                </linearGradient>
                                <linearGradient id="b" x1="-904.29" y1="581.81" x2="-904.29" y2="580.11" gradientTransform="matrix(50.69, 0, 0, -14.64, 45878.07, 8613.41)" gradientUnits="userSpaceOnUse">
                                    <stop offset="0" stop-color="#466d8d" />
                                    <stop offset="1" stop-color="#fbfbfb" />
                                </linearGradient>
                                <clipPath id="a-stay-inside">
                                    <path id="Fill-4" d="M62.18,75.09a30.11,30.11,0,0,0-1.67-3.42c-3.57-6.45-14.49-27.32-18.2-34L42.17,8.33H32.83L33,38c-3.7,6.66-14.55,27.22-18.12,33.67a28.17,28.17,0,0,0-1.66,3.42,3.13,3.13,0,0,0,.4,3.37,3.31,3.31,0,0,0,2.3,1.13H59.47a3.27,3.27,0,0,0,2.3-1.13,3.1,3.1,0,0,0,.41-3.37" transform="translate(-0.98 0)" style="fill:#466d8d;"></path>
                                </clipPath>
                            </defs>
                            <g style="opacity:0.20000001788139343">
                                <path d="M23.35,141.74h27" transform="translate(-0.98 0)" style="fill:none;stroke:#fbfbfb;stroke-linecap:round;stroke-width:5px" />
                                <path d="M70.05,105.31c0-1.62-2.32-2.73-3.93-3.68A18.73,18.73,0,0,0,56.57,99H17a18.77,18.77,0,0,0-9.56,2.63c-1.61,1-3.93,2.06-3.93,3.68,0,3.19-.18,5.2,1.45,7a52.7,52.7,0,0,0,5.81,5.5c3.8,2.86,6.76,5.71,11,8.54.19.12,1.58.8,1.56,1l-1.67,14.84H51.76l-1.63-14.84c0-.19,1.37-.87,1.56-1,4.28-2.83,7.25-5.68,11.06-8.54a51.94,51.94,0,0,0,5.82-5.5C70.21,110.51,70.05,108.75,70.05,105.31Z" transform="translate(-0.98 0)" style="fill:none;stroke-width:5px;opacity:0.5999999642372131;isolation:isolate;stroke:url(#a)" />
                                <path d="M18.73,104.78c-2.23.26-8.27,1.68-7.21,4.37.82,1.68,15.45,9.86,15.54,10.23H46.82c.09-.37,14.32-8.55,15.14-10.23,1.06-2.69-4.55-4.11-6.78-4.37C54.77,104.73,19.14,104.73,18.73,104.78Z" transform="translate(-0.98 0)" style="fill:url(#b)" />
                            </g>
                            <path d="M66.68,80.71A6.25,6.25,0,0,1,61.16,84H14.24a6.25,6.25,0,0,1-5.52-3.24,6.6,6.6,0,0,1,0-6.39c1.15-2.2,20.57-37.43,20.68-37.64a2.42,2.42,0,0,0,.31-1.18V6.1H45.64V34.68h0v.82A2.42,2.42,0,0,0,46,36.68c.11.21,19.52,35.44,20.68,37.64a6.6,6.6,0,0,1,.05,6.39m2.69-11.93C62.21,56,52.33,38.21,50.48,34.87v-.19h0V6A3,3,0,0,0,52.9,3.05s0,0,0,0V3a2,2,0,0,0-.16-.76A3,3,0,0,0,49.85,0H25.55a3,3,0,0,0-2.88,2.21A2.1,2.1,0,0,0,22.5,3s0,0,0,0v0A3,3,0,0,0,24.92,6v28.9C23.07,38.21,13.19,56,6,68.78a32.87,32.87,0,0,0-2.29,5A11.08,11.08,0,0,0,14.08,88.81H61.32A11.07,11.07,0,0,0,71.65,73.74a31.8,31.8,0,0,0-2.28-5" transform="translate(-0.98 0)" style="fill:#131313" />
                            <path d="M62.18,75.09a30.11,30.11,0,0,0-1.67-3.42C56.94,65.22,52.71,57.7,49,51H26.39c-3.7,6.66-7.94,14.18-11.51,20.63a28.17,28.17,0,0,0-1.66,3.42,3.13,3.13,0,0,0,.4,3.37,3.31,3.31,0,0,0,2.3,1.13H59.47a3.27,3.27,0,0,0,2.3-1.13,3.1,3.1,0,0,0,.41-3.37" transform="translate(-0.98 0)" style="fill:#466d8d" />
                            <g id="liquid" clip-path="url(#a-stay-inside)">
                                <rect id="rect-liquid-1" x="0" width="80" y="50" height="100" fill="#466d8d"></rect>
                            </g>
                        </svg>
                        <div class="d-flex flex-column goto" @click="goto" @mouseenter="attracting()" @mouseleave="stopattracting()">
                            <span class="class-hover pb-1">WHAT WE DO</span>
                            <span class="arrow d-inline-block right w-100"></span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="row d-flex flex-column justify-content-center w-50 h-100 ml-auto content-right">
                    <div class="home-item">
                        <router-link :to="'/'">Web Techonologies</router-link>
                        <div class="sub-items">
                            <router-link :to="'/'" class="animated fadeInDown">CASE STUDY</router-link>
                        </div>
                    </div>
                    <div class="home-item">
                        <router-link :to="'/'">E-Commerce</router-link>
                    </div>
                    <div class="home-item">
                        <router-link :to="'/'">User Experience</router-link>
                    </div>
                </div>
            </div>
        </div>
    </div> 
</template>

<script>
    export default {
        data: function () {
            return {
                next: true,
                inbottle: true,
                repeat: -1,
            }
        },
	    mounted() {
            
        },
        destroyed: function() {
        
        },
        methods: {
            goto(){
                let timeline = new TimelineMax({onComplete: function(){
                    this.inbottle = false;
                }});
                this.inbottle = true;

                if(this.next){
                    timeline.to('.goto', .3, {
                                opacity: 0,
                                ease: Power3.easeInOut,
                            })
                            .to('.svg-bottle', .5, {
                                rotation: -75,
                                ease: Power3.easeOut,
                            })
                            .set('.content',{
                                transformPerspective: 160,
                                rotationX: 0,
                                rotationY: 20,
                                x: 180,
                                y: 0,
                                scale: 0.4,
                            })
                            .to('.content', 1 , {
                                transformPerspective: 60,
                                rotationX: 0,
                                rotationY: 20,
                                x: 170,
                                y: 0,
                                scale: 0,
                                ease: Expo.easeOut,
                            })
                            .to('.svg-bottle', .5, {
                                rotation: 0,
                                ease: Power3.easeOut,
                            })  
                            .to('.overflow-h', 1, {
                                x: '-100vw',
                                ease: Power3.easeInOut,
                            })
                            .set("#rect-liquid-1", {className: "+=active"})
                            .add(
                                TweenMax.to('.btn-goto', 1, {
                                    x: $("#homepage .container:nth-of-type(2)").offset().left - $(".btn-goto").offset().left + 150,
                                })
                            )
                            .set("#rect-liquid-1", {className: "-=active"})
                            .to('.goto', .3, {
                                x: -300,
                                opacity: 1,
                                ease: Power3.easeInOut,
                            })
                            .to('.arrow', 1, {
                                rotationY: '180deg',
                            });
                }
                else{
                    timeline.to('.goto', .3, {
                                opacity: 0,
                                ease: Power3.easeInOut,
                            })
                            .to('.svg-bottle', .5, {
                                rotation: 75,
                                ease: Power3.easeOut,
                            })
                            .set('.content-right',{
                                transformPerspective: 260,
                                rotationX: 0,
                                rotationY: -18,
                                x: -180,
                                y: 0,
                                scale: 1,
                            })
                            .to('.content-right', 1 , {
                                transformPerspective: 260,
                                rotationX: 0,
                                rotationY: -20,
                                x: -280,
                                y: 0,
                                scale: 0,
                                ease: Expo.easeOut,
                            })
                            .to('.svg-bottle', .5, {
                                rotation: 0,
                                ease: Power3.easeOut,
                            })  
                            .to('.overflow-h', 1, {
                                x: 0,
                                ease: Power3.easeInOut,
                            })
                            .set("#rect-liquid-1", {className: "+=active"})
                            .add(
                                TweenMax.to('.btn-goto', 1, {
                                    x: 0,
                                })
                            )
                            .set("#rect-liquid-1", {className: "-=active"})
                            .to('.goto', .3, {
                                x: 0,
                                opacity: 1,
                                ease: Power3.easeInOut,
                            })
                            .to('.arrow', 1, {
                                rotationY: 0,
                            })
                }
                this.next = !this.next;
            },
            attracting(){
                if(this.next){
                    TweenMax.set('.content',{
                        transformPerspective: 260,
                        rotationY: 18,
                        x: 130,
                        y: 0,
                        scale: 0.88,
                    });
                    TweenMax.to('.content', .5, {
                        rotationX: 0,
                        rotationY: 20,
                        x: 180,
                        y: 0,
                        scale: 0.6,
                        repeat: -1,
                        yoyo: true,
                        ease: Expo.easeOut,
                    });
                }
                else{
                    TweenMax.set('.content-right',{
                        transformPerspective: 260,
                        rotationY: -18,
                        x: -130,
                        scale: 0.88,
                    });
                    TweenMax.to('.content-right', .5, {
                        rotationY: -20,
                        x: -180,
                        scale: 0.6,
                        repeat: -1,
                        yoyo: true,
                        ease: Expo.easeOut,
                    });
                }
            },
            stopattracting(){
                TweenMax.to('.content , .content-right', .3, {
                    transformPerspective: 260,
                    rotationX: 0,
                    rotationY: 0,
                    x: 0,
                    y: 0,
                    scale: 1,
                    ease: Expo.easeOut,
                });
            },
        },
        components: {
            
        },
        props: {

        },
    }
</script>

<style lang="sass" scoped>
#homepage
    width: 100vw 
    overflow: hidden
    .overflow-h
        min-height: calc(100vh - 210px)
        width: 200vw
    .overflow-wrap
        width: 100vw
    .content , .content-right
        width: 60%
        transform-origin: right
        transform: perspective(0) translate(0) rotate(0) scale(1)
        transition: all .5s ease-out
    .content-right
        transform-origin: left
    .btn-goto
        .goto
            font-size: 22px
        svg
            margin: 60px 40px 0 40px
    .home-item
        font-size: 54px
        margin: 58px 0
        font-weight: 600
        &:hover
            .sub-items
                height: 40px
    .sub-items
        height: 0px
        overflow: hidden
        transition: all .3s
        a
            font-size: 22px
            display: block
            &:before
                content: ""
                display: inline-block
                width: 70px
                height: 2px
                background: black
                vertical-align: middle
                margin-bottom: 4px
                margin-right: 10px
    #rect-liquid-1
        transform-origin: top
        &.active
            animation: liquid-move .2s cubic-bezier( 0.36, 0.45, 0.63, 0.53) 8
    .attracting
        animation: attracting 1s cubic-bezier( 0.36, 0.45, 0.63, 0.53) infinite
        animation-delay: .5s
        transform: perspective(23.5rem) rotateX(0deg) rotateY(18deg) translateX(180px) translateY(0px) scale(0.88)
    .attract-in
        transform: perspective(23.5rem) rotateX(0deg) rotateY(18deg) translateX(560px) translateY(0px) scale(0)
        transition: all 1s

@keyframes liquid-move
    0%
        transform: rotate(0deg)
    50%
        transform: rotate(10deg)
    100%
        transform: rotate(-10deg)
        
</style>